1. ملف main.py (الملف الرئيسي)

ده اللي بيشغل السيرفر كله وهو نقطة البداية.

جواه:

app = FastAPI() وده اللي بيجهز السيرفر يستقبل الطلبات.

بيقرأ البيانات المهمة من ملف .env زي بيانات الاتصال بقاعدة البيانات (Supabase).

فيه الـ Endpoints اللي الويب أبلكيشن بيكلمها وأهمها /submit_order.
-------------------------------------------------------------------------------------------------------------
2. مجلد controllers (العقل المدبر)

فيه الملفات اللي بتنّفذ الشغل الفعلي.

ملف order_generator.py (مولد الفواتير)

وظيفته إنه ياخد بيانات الطلب زي الأصناف والكمية والسعر ويحوّلها لملف وورد - (docx) شكله منسق.

أهم دالة فيه:

create_order_docx_bytes() ودي اللي بتعمل الشغل كله وبتطلع الملف في الذاكرة بصيغة Bytes.

ملف order_manager.py (مدير الطلبات)

مسؤول عن تنظيم أرقام الطلبات وأسماء الملفات.

أهم دوال فيه:

get_next_order_id() بتدي رقم جديد للطلب كل مرة بزيادة 1.

build_order_docx_path() بتبني اسم الملف زي wempy_order_101.docx.

ملف supabase_storage.py (التخزين السحابي)

مسؤول عن التعامل مع Supabase.

أهم دوال فيه:

upload_order_to_supabase() بيرفع ملف الوورد بعد ما يتجهز.

download_order_from_supabase() بينزل الطلبات عشان برنامج الطباعة يستخدمها.
----------------------------------------------------------------------------------------------------------------------------------
3. مجلد helpers (المساعدين)
ملف order_models.py (موديل الطلب)

ده زي القالب أو الفلتر اللي بيتأكد إن الطلب جاي ببيانات سليمة وكاملة (اسم العميل – الأصناف – الأسعار).

لو فيه بيانات ناقصة بيرفض الطلب.

برنامج الطباعة المحلي – مجلد printing_client

ملحوظة: ده برنامج منفصل عن السيرفر وبيشتغل على جهاز الكاشير في المحل.

printer_manager.py: بيتعامل مع الطابعات اللي متسجلة في الويندوز ويطبع الملفات.

supabase_manager.py: بيكلم السحابة كل فترة ويشوف لو فيه طلبات جديدة، ولو لقى بينزلها على الجهاز عشان تتطبع.